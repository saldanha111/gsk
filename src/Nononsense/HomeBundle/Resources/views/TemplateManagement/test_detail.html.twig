{% extends '::base.html.twig' %}
{% block page_title %}DOCXPRESSO | {{'Homepage'|trans}} {% endblock %}
{% block head %}
{{ parent() }}
<link rel="stylesheet" type="text/css" href="{{ asset('bundles/nononsensehome/css/adminlte.css') }}">
{% endblock %}
{% block main_title %} {{'Test de plantilla'|trans}}{% endblock %}
{% block content %}


<div class="wrapper wrapper-content">
    <h3>{{template.name}} {{template.number}}</h3>

    <div class="row">
        <div class="col-lg-4">
            {% if template.openedBy is defined and template.openedBy is not empty and template.openedBy.id!=app.user.id %}
                <div class="callout callout-warning">
                    <h4>¡Atención!</h4>
                    <p>La plantilla esta abierta por {{template.openedBy.name}}</p>
                </div>
            {% endif %}
            <div class="box box-default">
                <div class="box-header with-border">
                  <h3 class="box-title">Workflow</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    {% for wfitem in testers %}
                        {% if not wfitem.signed %}<div class="box box-danger">{% else %}<div class="box box-success">{% endif %}
                            <div class="box-header">
                                <h3 class="box-title">{{wfitem.userEntiy is defined and wfitem.userEntiy is not null ? ('<i class="fa fa-user"></i> '~wfitem.userEntiy.name)|raw : ('<i class="fa fa-users"></i> '~wfitem.groupEntiy.name)|raw}}</h3>

                                {% if not wfitem.signed %}<small class="label pull-right bg-red">Pendiente</small>{% else %}<small class="label pull-right bg-green">Elaborado</small>{% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <!-- /.box-body -->
            </div>   
        </div>

        <div class="col-lg-4">
            <div class="box box-default">
                <div class="box-header with-border">
                  <h3 class="box-title">Tests</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="form-group">
                        <a href="{{path('nononsense_tm_test_new', {'id': template.id}) }}" class="btn btn-primary pull-right"><i class="fa fa-flask"></i> Nuevo</a>
                    </div>  
                </div>
                {% if template.openedBy is defined and template.openedBy is not empty and template.openedBy.id!=app.user.id %}
                    <div class="overlay">
                      <i class="fa fa-cog fa-spin"></i>
                    </div>
                {% endif %}
                <!-- /.box-body -->
            </div>  
        </div>

        <div class="col-lg-4">
            <div class="box box-default">
                <div class="box-header with-border">
                  <h3 class="box-title">Test finalizados</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div class="form-group">
                        <a href="#" class="btn btn-primary pull-right"><i class="fa fa-thumbs-o-up"></i> He terminado</a>
                    </div>  
                </div>
                {% if template.openedBy is defined and template.openedBy is not empty and template.openedBy.id!=app.user.id %}
                    <div class="overlay">
                      <i class="fa fa-cog fa-spin"></i>
                    </div>
                {% endif %}
                <!-- /.box-body -->
            </div>  
        </div>

    </div>
</div>


{% endblock %}
{% block scripts %}
{{ parent() }}
<script src="/js/plugins/signature-pad/signature-pad.min.js"></script>
<script>
$( document ).ready(function() {


});
</script>
{% endblock %}
