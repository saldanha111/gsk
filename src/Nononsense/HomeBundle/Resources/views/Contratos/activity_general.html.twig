{% extends '::base.html.twig' %}
{% block page_title %}DOCXPRESSO | Actividad de area {% endblock %}
{% block head %}
{{ parent() }}
<link rel="stylesheet" href="/css/plugins/datapicker/datepicker3.css">
{% endblock %}
{% block main_title %} Actividad de area{% endblock %}
{% block content %}

<div class="wrapper wrapper-content">
    {% for flashMessage in app.session.flashbag.get('error') %}
    <div class="alert alert-danger alert-dismissable" style="margin: 10px 16px 0 16px">
        <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
        {{ flashMessage }}
    </div><br>
    {% endfor %}
    {% for flashMessage in app.session.flashbag.get('success') %}
    <div class="alert alert-success alert-dismissable" style="margin: 10px 16px 0 16px">
        <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
        {{ flashMessage }}
    </div><br>
    {% endfor %}
    <div class="row">
        <div class="col-sm-12">
            <div>
                <div class="row">
                    <form class="form-horizontal" id="form_item" action="{{ path('nononsense_activity')}}" method="GET">
                        <div class="form-group">
                            <label class="col-sm-1 control-label">Contenido</label>
                            <div class="col-sm-9 item_filter">
                                <input type="text" name="content" class="form-control" value="{{filters.content is defined ? filters.content : ''}}">
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="col-sm-1 control-label">ID</label>
                            <div class="col-sm-1 item_filter">
                                <input type="number" name="id" class="form-control" value="{{filters.id is defined ? filters.id : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">ID.Plant.</label>
                            <div class="col-sm-1 item_filter">
                                <input type="number" name="plantilla_id" class="form-control" value="{{filters.plantilla_id is defined ? filters.plantilla_id : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">Nombre</label>
                            <div class="col-sm-2 item_filter">
                                <input type="text" name="name" class="form-control" value="{{filters.name is defined ? filters.name : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">Usuario</label>
                            <div class="col-sm-2 item_filter">
                                <input type="text" name="creator" class="form-control" value="{{filters.creator is defined ? filters.creator : ''}}">
                            </div>
                        </div>
                        <div class="form-group">

                            <label class="col-sm-1 control-label">Fecha</label>
                            <div class="col-sm-1 item_filter">
                                <input type="text" class="form-control pull-right" autocomplete="off" name="from" id="from" value="{{filters.from is defined ? filters.from|date("Y-m-d") : ''}}">
                            </div>

                            <div class="col-sm-1">
                                <input type="text" class="form-control pull-right" autocomplete="off" name="until" id="until" value="{{filters.until is defined ? filters.until|date("Y-m-d") : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">Acción</label>
                            <div class="col-sm-2 item_filter">
                                <select class="form-control" style="width: 100%;" name="action">
                                    <option value=""></option>
                                    <option value="1" {{filters.action is defined and filters.action == 1 ? 'selected="selected"' : ''}}>Elaborar</option>
                                    <option value="2" {{filters.action is defined and filters.action == 2 ? 'selected="selected"' : ''}}>Validar</option>
                                    <option value="3" {{filters.action is defined and filters.action == 3 ? 'selected="selected"' : ''}}>Ver</option>
                                    <option value="4" {{filters.action is defined and filters.action == 4 ? 'selected="selected"' : ''}}>Completar checklist</option>
                                    <option value="5" {{filters.action is defined and filters.action == 5 ? 'selected="selected"' : ''}}>Verificar cancelación</option>
                                  </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-1 control-label">Lote</label>
                            <div class="col-sm-1 item_filter">
                                <input type="text" name="lot" class="form-control" value="{{filters.lot is defined ? filters.lot : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">Material</label>
                            <div class="col-sm-1 item_filter">
                                <input type="text" name="material" class="form-control" value="{{filters.material is defined ? filters.material : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">Work Order SAP</label>
                            <div class="col-sm-1 item_filter">
                                <input type="text" name="sap" class="form-control" value="{{filters.sap is defined ? filters.sap : ''}}">
                            </div>

                            <label class="col-sm-1 control-label">Núm. Equipo</label>
                            <div class="col-sm-1 item_filter">
                                <input type="text" name="equipment_number" class="form-control" value="{{filters.equipment_number is defined ? filters.equipment_number : ''}}">
                            </div>

                            
                        </div>

                        <div class="form-group">
                            <label class="col-sm-1 control-label">Agrupar por</label>
                            <div class="col-sm-2 item_filter">
                                <select class="form-control" style="width: 100%;" name="group">
                                    <option value=""></option>
                                    <option value="1" {{filters.group is defined and filters.group == 1 ? 'selected="selected"' : ''}}>Acción</option>
                                    <option value="2" {{filters.group is defined and filters.group == 2 ? 'selected="selected"' : ''}}>Usuario</option>
                                    <option value="3" {{filters.group is defined and filters.group == 3 ? 'selected="selected"' : ''}}>Plantilla</option>
                                    <option value="4" {{filters.group is defined and filters.group == 4 ? 'selected="selected"' : ''}}>Acción+Usuario</option>
                                    <option value="5" {{filters.group is defined and filters.group == 5 ? 'selected="selected"' : ''}}>Acción+Plantilla</option>
                                    <option value="6" {{filters.group is defined and filters.group == 6 ? 'selected="selected"' : ''}}>Usuario+Plantilla</option>
                                    <option value="7" {{filters.group is defined and filters.group == 7 ? 'selected="selected"' : ''}}>Usuario+Plantilla+Acción</option>
                                  </select>
                            </div>
                            <div class="col-sm-1">
                                <button type="submit" class="btn btn-primary pull-right">Filtrar</button>
                            </div>
                        </div>
                      </form>
                </div>
                <div class="row">
                    {% if filters.group is not defined %}
                        {% include 'NononsenseHomeBundle:Contratos:table_activity_general.html.twig' %}
                    {% else %}
                        {% if filters.group == 1 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_action.html.twig' %}
                        {% endif %}
                        {% if filters.group == 2 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_user.html.twig' %}
                        {% endif %}
                        {% if filters.group == 3 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_template.html.twig' %}
                        {% endif %}
                        {% if filters.group == 4 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_action_user.html.twig' %}
                        {% endif %}
                        {% if filters.group == 5 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_action_template.html.twig' %}
                        {% endif %}
                        {% if filters.group == 6 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_user_template.html.twig' %}
                        {% endif %}
                        {% if filters.group == 7 %}
                            {% include 'NononsenseHomeBundle:Contratos:table_activity_group_action_user_template.html.twig' %}
                        {% endif %}
                    {% endif %}
                    
                    {% if pagination is defined and pagination.needed %}
                        {% include '::pagination2.html.twig' %}
                    {% endif %}
                    
                    {% if count==0 %}
                        <br><b>No se han encontrado datos disponibles</b>
                    {% endif %}
                    
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block scripts %}
{{ parent() }}
<script src="/js/plugins/datapicker/bootstrap-datepicker.js"></script>
<script src="/js/plugins/datapicker/locales/bootstrap-datepicker.es.js" charset="UTF-8"></script>
<script>
  $(function () {
    $('#from').datepicker({
      autoclose: true,
      orientation: 'bottom auto',
      format: 'yyyy-mm-dd',
      language: 'es'
    });
    $('#until').datepicker({
      autoclose: true,
      orientation: 'bottom auto',
      format: 'yyyy-mm-dd',
      language: 'es'
    });
  });
</script>
{% endblock %}
