
<div class="row">
    <div class="col-lg-12">

            <div class="ibox">
                <div class="search-form">
                    <form onkeypress="return event.keyCode != 13;">
                        <div class="input-group">
                            <select id="newmember" class="form-control">
                                <option value="0">Seleccionar usuario</option>
                            {% for user in users %}
                                <option value="{{user.id}}">{{user.name}}</option>
                            {% endfor %}
                            </select>
                            <span class="input-group-btn"> <span id="searchButton" class="btn btn-primary" style="cursor:default">Añadir usuario</span> </span>
                        </div>
                    </form>
                </div>
                <ul class="userMiniList" id="userlist"></ul>
                <ul id="instructions">
                    <li>Comience a escribir un nombre de usuario y elija un valor de la lista desplegable</li>
                    <li>Siempre que decida guardar la lista, presione el botón "Guardar" a continuación.</li>
                </ul>
                <div class="text-center">
                    <button type="button" id="saveListButton" class="btn btn-primary">Guardar</button>
                </div>
                    
            </div>

    </div>
</div>

<script>
  $(function() {
    $('#saveListButton').click(function(){addListOfUsers('{{type}}')});
    $('#newmember').change(function(){
        var valid = $(this).val();
        if (valid > 0) {
            if (typeof window.members['id_' + valid] === 'undefined') {
                window.members['id_' + valid] = valid;
                insertUser(valid, '{{type}}');
            } else {
                toastr.error('El usuario ya ha sido agregado','{{'Warning'|trans}}');
            }
        }
    });
    $("#newmember").chosen({no_results_text: "Resultados no encontrados"});
    
  });
  </script>



